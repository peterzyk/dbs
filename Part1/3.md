# 1.3 数据库系统的结构

数据库的系统的结构可以有多种不同层次或不同的角度。

内部体系结构：

```
从数据库应用开发人员来看，数据库采用三级模式，这是数据库系统内部的系统结构。
```

外部体系结构：

```
从数据库最终用户角度看，数据库系统结构分为单用户结构、主从式结构、分布式结构、
客户-服务器、浏览器-应用服务器/ 数据库服务器多层结构等。
```

本节介绍数据库系统的模式结构（三模式两映像）

### 1.3.1 数据库模式的概念

**在数据模型中有“型”（type） 和 “值”（value）的概念。**型是指对某一类数据结构的结构和属性的说明，值是型的具体复制。 比如，学生记录定义为（学号，姓名，性别，系别，籍贯）这样的记录型，而（20202020，叶繁星，女，中文系，四川省成都市）就是该记录型的一个值。

**模式（schema）** 是数据库中全体数据的逻辑结构和特征的描述，它仅仅涉及 型的描述，**不涉及具体的值。**模式的一个具体值称为一个模型的实例（instance），同一个模式可以有多个实例。

模式是相对稳定的，实例是相对变动的。模式反应的是数据的结构及其联系。而实例反应的是数据库某一时刻的状态。

数据库管理系统产品虽然各有不同，但是它们在体系结构上通常有相同的特征，即采用 三级模式结构并提供两级映像功能。

### 1.3.2 数据库系统的三级模式结构

数据库系统的三级模式结构是指数据库系统由 **外模式、模式和内模式**三级构成。

##### 1.模式（schema）

**模式也称逻辑模式，是数据库中全体数据的逻辑结构和特征的描述，是所有用户的公共数据视图**。它是数据库系统模式结构的中间层，既不涉及物理存储也和具体的应用程序语言工具等无关。

模式实际上是数据库数据在逻辑级上的视图。**一个数据库只有一个模式。**

数据库管理系统提供  模式数据定义语言（模式DDL）  来严格定义模式。

##### 2.外模式（external schemal）

外模式也称子模式（subshcema）或用户模式，它是数据库用户能够看见和使用的局部数据的逻辑结构和特征的描述，**是数据库用户的数据视图，是与某一应用有关的数据的逻辑表示。**

外模式通常是模式的子集。**一个数据库可以有多个外模式**。它是各个用户的数据视图，一个应用程序只能使用一个外模式。

外模式是保证数据库安全性的一个有力措施。每个用户只能看见和访问所对应的外模式中的数据，数据库中其余数据是不可见的。

数据库管理系统提供  外模式数据定义语言（外模式DDL）  来严格定义模式。

##### 3.内模式 （internal schema）

内模式也称存储模式，一个数据库只有一个内模式。它是数据库物理结构和存储方式的描述，是数据在数据库内部的组织方式。

#### 小结

```
一个数据库只有一个 模式和内模式，但是可以有多个外模式，外模式通常是模式的子集。

模式是所有用户的公共数据视图，外模式是数据库用户的数据视图

外模式 是数据库安全性的有力措施。
```

### 1.3.3数据库的二级映像功能与数据独立性

数据库系统的三级模式是数据的三个抽象级别，它把数据的具体组织留给数据库管理系统管理，使用户能够逻辑地、抽象地处理数据，而不必关心数据在计算机中的具体方式和存储方式。**为了能够在系统内部实现这三个抽象层次的联系和转化**，数据库管理系统在这三级模式之间提供了两层映像：**外模式/模式映像   和 模式/内模式映像。**

**正是这两层映像保证了 数据库系统中的数据能够具有较高的逻辑独立性和物理独立性。**

##### 1. 外模式/模式映像

模式描述的是数据的全局逻辑结构，外模式描述的是数据的局部逻辑结构。一个模式可以有任意多个外模式。**对于每一个外模式，数据库系统都有一个外模式/模式映像**，它定义了该外模式与模式之间的关系。

当模式改变时（增加新的关系，属性，改变属性的数据类型）等，**由数据库管理员对各个外模式/模式的映像作相应改变，可以保持外模式不变。应用程序说依据外模式写的，所以应用程序也不必修改，保证了数据与程序的逻辑独立性，简称数据的逻辑独立性。**

##### 2.模式/内模式映像

数据库中只有一个模式，也只有一个内模式，所以 模式/内模式映像是唯一的，它**定义了数据全局逻辑结构与存储结构之间的对应关系**。例如，逻辑记录和字段在内部是如何表示的。该映像定义通常包含在模式定义中。**当数据库的存储结构发生改变时（改用了另外一种存储结构），由数据库管理员对模式/内模式映像作相应改变，可以使模式保持不变，从而应用程序也不变，保证了数据与程序的物理独立性，简称 数据的物理独立性。**

#### 小结

```
模式改变时，数据库管理员对相应 外模式/模式映像做出相应改变，其他可不变 ，逻辑独立性
存储结构改变时，数据库管理员对 模式/内模式映像作改变 其他不变，  物理独立性

设计数据库模式结构先确定数据库逻辑结构
```



